الخطوة 1: إعداد Surfan Integration Service
قول للـ AI:

text
"أنا عندي Next.js app وبدي أتعامل مع Surfan.ai (طرف ثالث بدون API)
اكتب لي Surfan Integration Service بـ:

1. Web Scraping لجيب بيانات المستخدم والـ agents والـ conversations
2. دالة لحذف محادثات
3. دالة لإنشاء AI agents جديدة
4. دالة لتحديث معلومات الـ agents
5. Cache system عشان ما تستنزف الـ bandwidth

استخدم: axios, cheerio, node-cache
أنا بدي أحفظ البيانات في قاعدتي بعدها"
الخطوة 2: Database Model
قول:

text
"اكتب لي Sequelize model اسمه SurfanIntegration بـ الحقول التالية:
- id (UUID primary key)
- userId (foreign key لـ User)
- surfanUserId (الـ ID في موقع surfan)
- surfanEmail (الإيميل المستخدم)
- lastSync (تاريخ آخر تحديث)
- syncStatus (pending, synced, failed)
- agentCount
- conversationCount
- lastError (لحفظ الأخطاء)

وعليها relations مع User model والـ Agent model"
الخطوة 3: Backend API Endpoints
قول:

text
"أنا بحتاج Express API routes للـ Surfan integration:

POST /api/surfan/sync/:userId
- تستدعي الـ scraper
- تجيب البيانات من surfan
- تحفظها في قاعدة البيانات
- ترجع نتيجة الـ sync

DELETE /api/surfan/conversations/:conversationId
- تحذف المحادثة من surfan
- تحذفها من قاعدتي كمان

POST /api/surfan/agents
- تنشئ agent جديد
- تحفظ البيانات في surfan وفي قاعدتي

PUT /api/surfan/agents/:agentId
- تعدل معلومات الـ agent

GET /api/surfan/status
- ترجع حالة الـ integration الحالية

مع proper error handling والـ authentication"
الخطوة 4: Email Notifications
قول:

text
"عندي email service بـ nodemailer
اكتب لي functions لـ:

1. notifySyncComplete(user, syncStats)
- تشتغل لما ينتهي الـ sync بنجاح
- ترسل إحصائيات (عدد agents, conversations)

2. notifySyncFailed(user, errorMessage)
- لما يفشل الـ sync
- مع رابط لـ retry

3. notifyConversationDeleted(user, conversationDetails)
- إشعار تأكيد الحذف

استخدم HTML templates و CSS الفاخر"
الخطوة 5: Cron Job للـ Auto-Sync
قول:

text
"استخدم node-cron اكتب لي job:

1. يشتغل كل 5 دقائق
2. يجيب كل الـ users اللي عندهم surfan integration
3. يستدعي الـ sync function لكل واحد
4. يسجل الأخطاء في database
5. يرسل email لو حصل مشكلة

مع:
- Rate limiting عشان surfan ما يبلك IP
- Retry logic لو فشل
- Logging للـ monitoring"
الخطوة 6: Frontend - User Dashboard
قول:

text
"اكتب لي React component اسمه SurfanIntegrationStatus:

1. عرض حالة الـ integration (connected/disconnected)
2. آخر وقت sync
3. عدد الـ agents المتزامنة
4. عدد الـ conversations
5. زر Sync الآن (يستدعي POST /api/surfan/sync)
6. عرض الأخطاء لو فيه
7. Loading spinner أثناء الـ sync
8. Toast notifications للنجاح والفشل

استخدم: React hooks, axios, react-hot-toast"
الخطوة 7: Admin Panel Features
قول:

text
"اكتب لي صفحة admin panel جديدة:

/admin/integrations/surfan

تعرض:
1. جدول بـ كل Users ومعلومات تكاملهم مع surfan
2. Columns: Name, Email, Status, AgentCount, LastSync, Actions
3. Action buttons:
   - View Details
   - Force Sync
   - Disconnect Integration
   - View Error Log
4. Filter by: Status, Last Sync Date
5. Search by: Name, Email
6. Pagination

مع loading states وconfirmation dialogs"
الخطوة 8: Security & Error Handling
قول:

text
"اضيف security layer:

1. Rate limiting: max 10 requests per minute per user
2. Input validation لـ كل المدخلات
3. Encryption لـ surfan credentials في database
4. Try-catch blocks مع custom error messages
5. Logging لـ كل operation (success/fail)
6. Timeout handling (أكثر من 30 ثانية = error)
7. Circuit breaker pattern لو surfan API معطل"
الخطوة 9: Testing
قول:

text
"اكتب لي basic test cases:

1. Test sync with valid user
2. Test sync with invalid user
3. Test conversation deletion
4. Test agent creation
5. Test error handling (timeout, invalid response)
6. Test concurrent requests (multiple users)
7. Test cache efficiency

استخدم: Jest أو Mocha/Chai"
الخطوة 10: Documentation
قول:

text
"اكتب لي README file بـ:

1. How to set up Surfan integration
2. API documentation (endpoints, request/response)
3. Database schema
4. Environment variables needed
5. Troubleshooting guide
6. Rate limits والـ best practices
7. How to handle sync failures"














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
